<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bao</title>
    <link rel="stylesheet" href="pure.css">
    <link rel="stylesheet" href="grids-responsive.css">
    <script src="jquery-3.4.1.js"></script>

    <style>
        .sidebar {
            margin: 1em 2em;
            border: 1px solid #ff3131;
        }

        .content {
            margin: 1em 2em;
            border: 2px solid #00ff80;
            text-align: center;
        }

        li {
            margin: 1em;
        }

        .button-secondary {
            color: white;
            border-radius: 4px;
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
            background: rgb(66, 184, 221);
            font-size: 125%;
            margin-top: 0.5em;
        }
    </style>

</head>



<body>

    <div id="layout" class="pure-g">


        <div class="pure-u-1 pure-u-md-1-4">
            <div class="sidebar">
                <ul>
                    <li>
                        文字1：<input id="wenzi1" type="text">
                    </li>
                    <li>
                        文字2：<input id="wenzi2" type="text">
                    </li>
                    <li>
                        文字3：<input id="wenzi3" type="text">
                    </li>
                </ul>

            </div>
        </div>

        <div class="pure-u-1 pure-u-md-3-4">
            <div class="content">
                <a id="btn_save" class="button-secondary pure-button" download="bao.png">右键图像另存为</a>
                <div>
                    <canvas id="myCanvas1" style="margin: 0.5em 0.5em;">
                        您的浏览器不支持Canvas，请升级浏览器
                    </canvas>
                </div>
            </div>

        </div>


    </div>

</body>


</html>



<script>
    $("#btn_save").click(function () {

        var canvas = document.getElementById('myCanvas1');
        var tempSrc = canvas.toDataURL("image/png");
        $(this).attr("href",tempSrc)
    })
</script>


<script>
    function huizhi() {

        wenzi1_val[0] = $("#wenzi1").val();
        wenzi1_val[1] = 190;
        wenzi1_val[2] = 180;

        wenzi2_val[0] = $("#wenzi2").val();
        wenzi2_val[1] = 190;
        wenzi2_val[2] = 222;

        wenzi3_val[0] = $("#wenzi3").val();
        wenzi3_val[1] = 615;
        wenzi3_val[2] = 394;

        var canvas = document.getElementById('myCanvas1');
        var ctx = canvas.getContext('2d');
        ctx.canvas.width = 750;
        ctx.canvas.height = 1044;
        ctx.fillStyle = "#CC6699";
        ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
        var img = new Image();
        img.src = "./bao.png";
        //一定要在图像加载完成后的回调中会绘制图像，否则图像显示不出来
        img.onload = function () {
            //如果是三个参数，表示以（0,0）在图像左上角开始绘制图像
            //如果是五个参数，表示在（0,0）点处绘制img图像，缩放(截取)成40*40
            //如果是九个参数，表示获取img图像（0,0）点处的40*40区域，绘制在（100，100）点处，缩放成80*80
            ctx.drawImage(img, 0, 0);

            ctx.font = "600 16px 宋体";
            //水平对齐设置，left,center,top
            ctx.textAlign = "left";
            //垂直对齐设置,top,middle,bottom
            ctx.textBaseline = "middle";
            ctx.fillStyle = "#282828";
            //填充文本
            ctx.fillText(wenzi1_val[0], wenzi1_val[1], wenzi1_val[2]);
            ctx.fillText(wenzi2_val[0], wenzi2_val[1], wenzi2_val[2]);
            ctx.fillText(wenzi3_val[0], wenzi3_val[1], wenzi3_val[2]);
        }
    }

    wenzi1_val = [];
    wenzi2_val = [];
    wenzi3_val = [];

    $("#wenzi1").bind("input propertychange", function (e) { huizhi() });

    $("#wenzi2").bind("input propertychange", function (e) { huizhi() });

    $("#wenzi3").bind("input propertychange", function (e) { huizhi() });
</script>




<script>
    var canvas = document.getElementById('myCanvas1');
    var ctx = canvas.getContext('2d');
    ctx.canvas.width = 750;
    ctx.canvas.height = 1044;
    ctx.fillStyle = "#000000";
    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
    var img = new Image();
    img.src = "./bao.png";
    //一定要在图像加载完成后的回调中会绘制图像，否则图像显示不出来
    img.onload = function () {
        //如果是三个参数，表示以（0,0）在图像左上角开始绘制图像
        //如果是五个参数，表示在（0,0）点处绘制img图像，缩放(截取)成40*40
        //如果是九个参数，表示获取img图像（0,0）点处的40*40区域，绘制在（100，100）点处，缩放成80*80
        ctx.drawImage(img, 0, 0);
    }
</script>